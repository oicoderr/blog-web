exports.ids=[7],exports.modules={35:function(t,e,r){"use strict";e.a={methods:{footer(){$("#mailContent").height()<$(window).height()?this.$store.commit("changeFooterFixed",!0):this.$store.commit("changeFooterFixed",!1)}}}},36:function(t,e,r){"use strict";var o=r(33),n=r.n(o);n.a.interceptors.response.use(t=>t.data?t.data:{},function(t){return Promise.reject(t)});var l=n.a;r.d(e,"f",function(){return h}),r.d(e,"g",function(){return c}),r.d(e,"d",function(){return y}),r.d(e,"m",function(){return x}),r.d(e,"h",function(){return v}),r.d(e,"a",function(){return m}),r.d(e,"e",function(){return f}),r.d(e,"c",function(){return w}),r.d(e,"l",function(){return B}),r.d(e,"i",function(){return L}),r.d(e,"b",function(){return S}),r.d(e,"k",function(){return C}),r.d(e,"j",function(){return k});const d="production api",h=(t={})=>l.get(`${d}article/get`,{params:t}),c=()=>l.get(`${d}article/getAll`),y=t=>l.post(`${d}article/like/${t}`),x=()=>l.get(`${d}tag/get`),v=t=>l.get(`${d}comment/get`,{params:t}),m=t=>l.put(`${d}comment/add`,{...t}),f=t=>l.post(`${d}comment/like/${t}`),w=t=>l.put(`${d}reply/add`,{...t}),B=t=>l.get(`${d}reply/get/${t}`),L=t=>l.get(`${d}hero/get`,{params:t}),S=t=>l.put(`${d}hero/add`,{...t}),C=t=>l.get(`${d}project/get`,{params:t}),k=t=>l.get(`${d}music/get`,{params:t})},49:function(t,e,r){var content=r(72);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=r(3).default;t.exports.__inject__=function(t){o("b07a8c52",content,!0,t)}},71:function(t,e,r){"use strict";r.r(e);var o=r(49),n=r.n(o);for(var l in o)"default"!==l&&function(t){r.d(e,t,function(){return o[t]})}(l);e.default=n.a},72:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,".slide-fade-enter-active[data-v-2a2d8688],.slide-fade-leave-active[data-v-2a2d8688]{transition:all .3s ease}.slide-fade-enter[data-v-2a2d8688]{-webkit-transform:translateX(-20px);transform:translateX(-20px);opacity:0}.slide-fade-leave-to[data-v-2a2d8688]{-webkit-transform:translateX(20px);transform:translateX(20px);opacity:0}.poster-fade-enter-active[data-v-2a2d8688],.poster-fade-leave-active[data-v-2a2d8688]{transition:opacity .5s}.poster-fade-enter[data-v-2a2d8688],.poster-fade-leave-to[data-v-2a2d8688]{opacity:0}.list-fade-enter-active[data-v-2a2d8688],.list-fade-leave-active[data-v-2a2d8688]{transition:all .3s ease}.list-fade-enter[data-v-2a2d8688],.list-fade-leave-to[data-v-2a2d8688]{-webkit-transform:translateX(-400px);transform:translateX(-400px);opacity:0}@-webkit-keyframes myrotate-data-v-2a2d8688{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes myrotate-data-v-2a2d8688{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.musicBox[data-v-2a2d8688]{width:100%;height:100%;position:relative;background:#000}.oparations[data-v-2a2d8688]{width:20vw;height:20vw;background:transparent;left:50%;top:50%;position:absolute;-webkit-transform:translate(-10vw,-10vw);transform:translate(-10vw,-10vw);z-index:10;border-radius:50%;overflow:hidden;box-shadow:0 0 50px hsla(0,0%,100%,.3)}.oparations .abs[data-v-2a2d8688]{position:absolute;width:100%;height:100%;left:0;top:0}.musicBtns[data-v-2a2d8688]{position:absolute;left:50%;top:50%;width:160px;height:160px;margin:-80px 0 0 -80px;z-index:1}.musicBtnBox img[data-v-2a2d8688]{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-animation:myrotate-data-v-2a2d8688 30s linear infinite;animation:myrotate-data-v-2a2d8688 30s linear infinite}.musicBtnBox .pbtn[data-v-2a2d8688]{position:absolute;width:60px;height:60px;border-radius:50%;border:1px solid #326b9f;text-align:center;line-height:60px;cursor:pointer;z-index:1}.musicBtnBox .pbtn i[data-v-2a2d8688]{font-size:20px;color:#326b9f}.musicBtnBox .pbtn[data-v-2a2d8688]:hover{border-color:#2b9aff;box-shadow:inset 0 0 16px #2b9aff}.musicBtnBox .pbtn:hover i[data-v-2a2d8688]{color:#2b9aff}.musicBtnBox .btnList[data-v-2a2d8688]{left:10px;top:2px}.musicBtnBox .btnLyric[data-v-2a2d8688]{right:10px;top:2px}.musicBtnBox .btnPlay[data-v-2a2d8688]{left:50%;top:50%;margin-top:-30px;margin-left:-30px}.musicBtnBox .btnNext[data-v-2a2d8688]{right:10px;bottom:2px}.musicBtnBox .btnPrev[data-v-2a2d8688]{left:10px;bottom:2px}.lyricBox[data-v-2a2d8688]{overflow:hidden;z-index:1}.lyricBox .topMask[data-v-2a2d8688]{top:0;background:linear-gradient(0deg,rgba(3,6,24,.1),#030618)}.lyricBox .bottomMask[data-v-2a2d8688],.lyricBox .topMask[data-v-2a2d8688]{width:100%;height:10vw;position:absolute;left:0;z-index:1}.lyricBox .bottomMask[data-v-2a2d8688]{bottom:0;background:linear-gradient(180deg,rgba(3,6,24,.1),#030618)}.lyricBox .lyriList[data-v-2a2d8688]{text-align:center;position:absolute;left:0;top:50%;width:100%;margin-top:-16px}.lyricBox .lyriList ul[data-v-2a2d8688]{transition:.3s}.lyricBox .lyriList li[data-v-2a2d8688]{color:#fff;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:32px;height:32px;font-size:14px}.musicList[data-v-2a2d8688]{position:fixed;width:200px;height:400px;border:1px solid #326b9f;border-left:0;left:0;top:50%;margin-top:-250px;box-sizing:border-box;overflow:hidden;border-radius:4px}.musicList li[data-v-2a2d8688]:hover{background:#fff}.musicList li[data-v-2a2d8688]{line-height:40px;color:#2b9aff;width:100%;box-sizing:border-box;border-bottom:1px dashed #1c6fbb;font-size:12px;cursor:pointer;text-align:center;transition:.3s;padding:0 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.lyricScroll[data-v-2a2d8688]{width:10px;height:100%;position:absolute;right:0;top:0;z-index:1}.lyricScroll .lyricScrollBar[data-v-2a2d8688]{width:8px;height:20px;position:absolute;left:1px;top:0;background:#006bcc;border-radius:8px;cursor:pointer;opacity:.7}.lyricScroll .lyricScrollBar.active[data-v-2a2d8688],.lyricScroll .lyricScrollBar[data-v-2a2d8688]:hover{opacity:1}",""])},84:function(t,e,r){"use strict";r.r(e);var o=r(35),n=r(36);function l(t){var e=t.substring(1,t.length).split(":");return parseFloat(60*e[0])+parseFloat(e[1])}var d="#000011",h="#060D1F",c="#02243F",y="#465677",x="#B5BFD4",v="#F451BA",m=1500,f=140,w="rgba(29, 36, 57, 0.05)",B="rgba(0,0,0,0)",L="rgba(157, 242, 157, 0.11)",S="rgba(157, 242, 157, 0.8)",C=.05,k=512,_="rgba(29, 36, 57, 0.1)",M="rgba(29, 36, 57, 0.05)",P="rgba(77, 218, 248, 1)",D="rgba(77, 218, 248, 1)",A=.001,$=64,z=100,F=(Math.floor,Math.round,Math.random),N=Math.sin,E=Math.cos,T=Math.PI,I=2*T,Y=T/180,j=0,O=0,H=0;class W{constructor(t,e,r){let o,n;this.x=Math.random()*e-j,this.y=Math.random()*r-O,this.z=this.max_depth=Math.max(e/r),this.radius=.2,o=this.x>0?1:-1,n=this.y>0?1:-1,Math.abs(this.x)>Math.abs(this.y)?(this.dx=1,this.dy=Math.abs(this.y/this.x)):(this.dx=Math.abs(this.x/this.y),this.dy=1),this.dx*=o,this.dy*=n,this.dz=-.1,this.ddx=.001*this.dx,this.ddy=.001*this.dy,this.y>O/2?this.color=x:this.color=t>z+10?x:t>f?v:y,o=n=null}}class X{constructor(t){this.index=t.index,this.angle=360*this.index/k,this.updateDynamics(t.w,t.h),this.value=256*Math.random(),this.dx=this.x+this.value*N(Y*this.angle),this.dy=this.y+this.value*E(Y*this.angle)}updateDynamics(t,e){this.radius=Math.abs(t,e)/10,this.x=j+this.radius*N(Y*this.angle),this.y=O+this.radius*E(Y*this.angle)}}class J{constructor(t){this.index=t.index,this.angle=360*this.index/$,this.updateDynamics(t.w,t.h),this.value=256*Math.random(),this.dx=this.x+this.value*N(Y*this.angle),this.dy=this.y+this.value*E(Y*this.angle)}updateDynamics(t,e){this.radius=Math.abs(t,e)/10,this.x=j+this.radius*N(Y*this.angle),this.y=O+this.radius*E(Y*this.angle)}}var U=class{constructor(t,e,r,o,n){this.analyser=e,this.ctx=t,this.stars=[],this.points=[],this.avg_points=[],this.w=r,this.h=o,this.playing=!1,this.frequencyDataLength=e.frequencyBinCount,this.frequencyData=new Uint8Array(this.frequencyDataLength),this.timeData=new Uint8Array(this.frequencyDataLength),this.cb=n,this.init()}init(){this.resizeHandler(),this.createStarField(),this.createPoints(),this.clearCanvas(),this.drawStarField(),this.drawAverageCircle(),this.drawWaveform()}updatePlaying(b){this.playing=b}createStarField(){let i=-1;for(;++i<m;)this.stars.push(new W(this.avg,this.w,this.h));this.catchOriginStart=JSON.parse(JSON.stringify(this.stars)),i=null}createPoints(){const{w:t,h:e}=this;let i=-1;for(;++i<k;)this.points.push(new X({index:i+1,w:t,h:e}));for(i=-1;++i<$;)this.avg_points.push(new J({index:i+1,w:t,h:e}));i=null}getAvg(t){let e=0;return t.forEach(t=>{e+=t}),e/t.length}animate(){if(!this.playing)return;const{analyser:t,getAvg:e,frequencyData:r,timeData:o}=this;requestAnimationFrame(this.animate.bind(this)),t.getByteFrequencyData(r),t.getByteTimeDomainData(o),this.avg=e([].slice.call(r)),this.clearCanvas(),this.drawStarField(),this.drawAverageCircle(),this.drawWaveform(),this.cb&&this.cb()}clearCanvas(){const{ctx:t,w:e,h:r}=this;let o=t.createLinearGradient(0,0,0,r);o.addColorStop(0,d),o.addColorStop(.96,h),o.addColorStop(1,c),t.beginPath(),t.globalCompositeOperation="source-over",t.fillStyle=o,t.fillRect(0,0,e,r),t.fill(),t.closePath(),o=null}drawStarField(){let i,t,p,e,{stars:r,avg:o,ctx:n,catchOriginStart:l}=this,d=this.w,h=this.h;for(i=0,t=r.length;i<t;i++)(p=r[i]).x=p.x||l[i].x,p.y=p.y||l[i].y,e=o>z?o/20:o/50,p.x+=p.dx*e,p.y+=p.dy*e,p.z+=p.dz,p.dx+=p.ddx,p.dy+=p.ddy,p.radius=.2+.1*(p.max_depth-p.z),p.x<-j||p.x>j||p.y<-O||p.y>O?r[i]=new W(o,d,h):(n.beginPath(),n.globalCompositeOperation="lighter",n.fillStyle=p.color,n.arc(p.x+j,p.y+O,p.radius,I,!1),n.fill(),n.closePath());i=t=p=e=null}drawAverageCircle(){let i,t,p,e,r,o,{avg:n,ctx:l,avg_points:d}=this;for(n>z?(H+=-A,e=n+10*F(),l.strokeStyle=D,l.fillStyle=M):(H+=A,e=n,l.strokeStyle=P,l.fillStyle=_),l.beginPath(),l.lineWidth=1,l.lineCap="round",l.save(),l.translate(j,O),l.rotate(H),l.translate(-j,-O),l.moveTo(d[0].dx,d[0].dy),i=0,t=$;i<t-1;i++)(p=d[i]).dx=p.x+e*N(Y*p.angle),p.dy=p.y+e*E(Y*p.angle),r=(p.dx+d[i+1].dx)/2,o=(p.dy+d[i+1].dy)/2,l.quadraticCurveTo(p.dx,p.dy,r,o);(p=d[i]).dx=p.x+e*N(Y*p.angle),p.dy=p.y+e*E(Y*p.angle),r=(p.dx+d[0].dx)/2,o=(p.dy+d[0].dy)/2,l.quadraticCurveTo(p.dx,p.dy,r,o),l.quadraticCurveTo(r,o,d[0].dx,d[0].dy),l.stroke(),l.fill(),l.restore(),l.closePath(),i=t=p=e=r=o=null}drawWaveform(){let i,t,p,e,r,o,{avg:n,ctx:l,points:d,timeData:h}=this;for(n>z?(H+=C,l.strokeStyle=S,l.fillStyle=B):(H+=-C,l.strokeStyle=L,l.fillStyle=w),l.beginPath(),l.lineWidth=1,l.lineCap="round",l.save(),l.translate(j,O),l.rotate(H),l.translate(-j,-O),l.moveTo(d[0].dx,d[0].dy),i=0,t=k;i<t-1;i++)p=d[i],e=h[i],p.dx=p.x+e*N(Y*p.angle),p.dy=p.y+e*E(Y*p.angle),r=(p.dx+d[i+1].dx)/2,o=(p.dy+d[i+1].dy)/2,l.quadraticCurveTo(p.dx,p.dy,r,o);e=h[i],(p=d[i]).dx=p.x+e*N(Y*p.angle),p.dy=p.y+e*E(Y*p.angle),r=(p.dx+d[0].dx)/2,o=(p.dy+d[0].dy)/2,l.quadraticCurveTo(p.dx,p.dy,r,o),l.quadraticCurveTo(r,o,d[0].dx,d[0].dy),l.stroke(),l.fill(),l.restore(),l.closePath(),i=t=p=e=r=o=null}resizeHandler(){let{ctx:t,w:e,h:r,avg_points:o,points:n}=this;j=e/2,O=r/2,t.canvas.width=e,t.canvas.height=r,n.forEach(p=>{p.updateDynamics()}),o.forEach(p=>{p.updateDynamics()})}},G={head:{title:"Pydw | 音乐",meta:[{hid:"description",name:"description",content:"Pydw | 音乐"}]},layout:"music-layout",data:()=>({music:[],lyricArr:[],playing:!1,musicLink:"",text1:"",text2:"",playIndex:0,showLyric:!1,poster:"",showAllBtn:!1,showlyricScroll:!1,lyricScrollY:0,isScrolling:!1,showList:!1}),mixins:[o.a],computed:{showBtns(){return!this.showLyric}},methods:{initDom(){const t=this.$refs;this.play=t.play,this.pause=t.pause,this.next=t.next,this.prev=t.prev,this.canvas=t.canvas,this.audio=t.audio,this.musicBox=t.musicBox,this.lyriList=t.lyriList,this.lyricScrollBar=t.lyricScrollBar,this.musicList=t.musicList,this.musicListBox=t.musicListBox,this.init(),this.initCanvas(),this.initLyricScroll()},init(){this.ctx=this.canvas.getContext("2d"),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.source=this.audioCtx.createMediaElementSource(this.audio),this.analyser=this.audioCtx.createAnalyser(),this.analyser.fftSize=1024,this.analyser.minDecibels=-100,this.analyser.maxDecibels=-30,this.analyser.smoothingTimeConstant=.8,this.analyser.connect(this.audioCtx.destination),this.source.connect(this.analyser)},initCanvas(){const{ctx:t,analyser:e,musicBox:r,canvas:canvas}=this;let o=r.offsetWidth,n=r.offsetHeight;canvas.width=o,canvas.height=n,canvas.style.width=o+"px",canvas.style.height=n+"px",this.musicDraw=new U(t,e,o,n,this.getLineLyric),this.audio.onended=(()=>{this.toNext()}),this.poster=this.music[0]?this.music[0].poster:""},toPlay(){this.playing?this.toPause():this.musicLink?this.audioCtx.resume().then(()=>{this.audio.play(),this.playing=!0,this.musicDraw.updatePlaying(this.playing),this.musicDraw.animate()}):this.loadMusic()},toPause(){this.audio.pause(),this.playing=!1,this.musicDraw.updatePlaying(this.playing)},toNext(){this.playIndex+=1,this.playIndex===this.music.length&&(this.playIndex=0),this.loadMusic()},toPrev(){this.playIndex-=1,this.playIndex<=0&&(this.playIndex=0),this.loadMusic()},selectMusic(t){this.playIndex=t,this.loadMusic(),this.showList=!1},btnMousrenter(){this.showAllBtn=!0},btnMouseleave(){this.showAllBtn=!1},loadMusic(){let t=this.music[this.playIndex];this.musicLink!==t.url&&(this.toPause(),this.musicLink=t.url,this.poster=t.poster,this.lyricArr=(t=>{let e=[];return t&&(e=t.split("[").reduce((t,e)=>{let r=e.trim().split("]");return r[1]&&t.push({time:l(r[0]),text:r[1]}),t},[])),e})(t.lyrics),this.audio.onloadedmetadata=(()=>{this.toPlay()}))},toList(){this.showList=!this.showList},toLyric(){this.showLyric=!0},hideLyric(){this.showLyric=!1},getLineLyric(){const{audio:audio,lyricArr:t,lyriList:e}=this;let r=((time,t)=>{let e=t.length-1;for(let i=0;i<e;i++)if(time<=t[i].time)return i;return e})(audio.currentTime,t);r>0&&(r-=1),this.text2=t[r].text,this.text1!==this.text2&&(e.style.transform=`translate3d(0, ${32*-r}px,0)`),this.text1=this.text2},initLyricScroll(){const{music:t,lyricScrollBar:e}=this;this.ah=41*t.length,0===this.ah?this.showlyricScroll=!1:this.ah>400&&(this.lyricScrollBarHeight=16e4/this.ah,e.style.height=this.lyricScrollBarHeight+"px",this.showlyricScroll=!0,this.initLyricScrollEvernt())},initLyricScrollEvernt(){const{lyricScrollBar:t,musicListBox:e}=this;let r=0,o=400-this.lyricScrollBarHeight,n=0,l=0;const d=()=>{l<=0?(l=0,n++):l>o?(l=o,n++):n=0,n<=2&&(this.lyricScrollBar.style.transform=`translateY(${l}px)`,this.musicList.style.transform=`translateY(${-l/400*this.ah}px)`)},h=t=>{let e=t.clientY-r;l=this.lyricScrollY+e,this.isScrolling=!0,d()},c=t=>{this.lyricScrollY=l,this.isScrolling=!1,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",c)};t.addEventListener("mousedown",t=>{r=t.clientY,this.isScrolling=!1,document.addEventListener("mousemove",h),document.addEventListener("mouseup",c)}),e.addEventListener("mousewheel",t=>{t.preventDefault(),t.stopPropagation(),l=this.lyricScrollY+t.deltaY,d(),this.lyricScrollY=l})}},async mounted(){let t=await Object(n.j)();this.music=t.result||[],this.$nextTick(()=>{this.initDom(),this.footer()})},beforeDestroy(){this.ctx=null,this.audioCtx=null,this.source=null,this.analyser=null}},R=r(1);var component=Object(R.a)(G,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"musicBox",staticClass:"musicBox"},[t._ssrNode('<div class="oparations" data-v-2a2d8688>',"</div>",[t._ssrNode('<div class="lyricBox abs"'+t._ssrStyle(null,null,{display:t.showLyric?"":"none"})+' data-v-2a2d8688><div class="topMask" data-v-2a2d8688></div> <div class="bottomMask" data-v-2a2d8688></div> <div class="lyriList" data-v-2a2d8688><ul data-v-2a2d8688>'+t._ssrList(t.lyricArr,function(e,r){return"<li data-v-2a2d8688>"+t._ssrEscape(t._s(e.text))+"</li>"})+" "+(0===t.lyricArr.length?"<li data-v-2a2d8688>大侠，请点击播放加载歌词吧...</li>":"\x3c!----\x3e")+"</ul></div></div> "),t._ssrNode('<div class="musicBtnBox abs"'+t._ssrStyle(null,null,{display:t.showBtns?"":"none"})+" data-v-2a2d8688>","</div>",[r("transition",{attrs:{name:"slide-fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showAllBtn,expression:"showAllBtn"}],staticClass:"musicBtns"},[r("span",{staticClass:"btnList pbtn",on:{click:t.toList}},[r("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),r("span",{staticClass:"btnLyric pbtn",on:{click:t.toLyric}},[r("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),r("span",{ref:"play",staticClass:"btnPlay pbtn",on:{click:t.toPlay}},[r("i",{staticClass:"iconfont"},[t._v(t._s(t.playing?"":""))])]),t._v(" "),r("span",{ref:"prev",staticClass:"btnPrev pbtn",on:{click:t.toPrev}},[r("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),r("span",{ref:"next",staticClass:"btnNext pbtn",on:{click:t.toNext}},[r("i",{staticClass:"iconfont"},[t._v("")])])])]),t._ssrNode(" "),r("transition",{attrs:{name:"poster-fade"}},[t.poster?r("img",{directives:[{name:"show",rawName:"v-show",value:!t.showAllBtn,expression:"!showAllBtn"}],attrs:{src:t.poster}}):t._e()])],2)],2),t._ssrNode(' <canvas width="1000" height="800" class="musicCanvas" data-v-2a2d8688>您的浏览器不支持canvas标签</canvas> <audio'+t._ssrAttr("src",t.musicLink)+' crossOrigin="anonymous" style="display: none" data-v-2a2d8688>您的浏览器不支持audio标签</audio> '),r("transition",{attrs:{name:"list-fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],ref:"musicListBox",staticClass:"musicList"},[r("ul",{ref:"musicList"},t._l(t.music,function(e,o){return r("li",{key:e._id,on:{click:function(e){return t.selectMusic(o)}}},[t._v(t._s(e.title)+"("+t._s(e.name)+")")])}),0),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showlyricScroll,expression:"showlyricScroll"}],staticClass:"lyricScroll"},[r("div",{ref:"lyricScrollBar",staticClass:"lyricScrollBar",class:t.isScrolling?"active":""})])])])],2)},[],!1,function(t){var e=r(71);e.__inject__&&e.__inject__(t)},"2a2d8688","47538e4d");e.default=component.exports}};
//# sourceMappingURL=3ee7017d4a52f32c98e5.js.map